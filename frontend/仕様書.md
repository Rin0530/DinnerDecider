<!-- ...existing code... -->

# DinnerDecider フロントエンド仕様書

## 概要
ユーザが冷蔵庫の中身を登録すると、その食材を元にGPTが夕食の献立を提案してくれるWebアプリのフロントエンド設計。

## 目標
- 直感的なUIで冷蔵庫の中身を管理し、簡単に献立の提案を受けられるUX
- モバイルファーストでのレスポンシブ対応
- テスト可能で保守しやすいモジュール構成
- API と分離したクリーンなデータフロー

## 非機能要件
- 0.5s 以内で初期レンダリング（簡易）
- 99% の主要操作をアクセシブル（キーボード / スクリーンリーダ）
- オフライン時の閲覧・保存の部分サポート（Service Worker キャッシュ）

## 技術選定
- フレームワーク: React + TypeScript
- ビルド: Vite
- ルーティング: React Router
- 状態管理: Zustand（または Redux Toolkit、状況に応じて）
- スタイリング: Tailwind CSS（ユーティリティ優先）＋コンポーネント単位の CSS Modules 必要時
- API クライアント: fetch / axios（軽量）
- テスト: Vitest + React Testing Library
- Lint/Format: Biome（高速なRust製オールインワンツール）
- CI: GitHub Actions（lint → test → build → deploy）
- デプロイ: Vercel / Netlify / GitHub Pages（要決定）

## フォルダ構成（推奨）
- src/
  - main.tsx
  - App.tsx
  - pages/
    - Home.tsx
    - Result.tsx
    - Settings.tsx
    - Meals.tsx
  - components/
    - Header.tsx, Footer.tsx
    - MealCard.tsx
    - Selector.tsx
    - Filters/
  - layouts/DefaultLayout.tsx
  - hooks/useMealPicker.ts
  - stores/mealStore.ts
  - services/api.ts
  - types/index.ts
  - utils/
  - styles/globals.css
  - assets/
  - tests/

## 主要コンポーネントと責務
- Home
  - 冷蔵庫の食材を一覧表示・登録・編集・削除する機能を提供
  - 献立の提案をリクエストするアクションを提供
- MealCard
  - 提案された単一の献立を表示（料理名、手順、不足している食材など）
- Result
  - GPTから提案された献立のリストを表示
- Settings
  - アプリケーションの基本的な設定（将来的にはお気に入り献立の管理など）
- Header/Footer
  - ナビゲーション、バージョン、利用規約リンク

## データフロー（簡易）
1. Homeで食材を一覧表示・登録・編集・削除 → `services/api` を通じてバックエンドAPI (`GET`, `POST`, `PUT`, `DELETE /ingredients`) を呼び出し
2. Home で「献立を提案」ボタンを押す → `POST /recipes/suggestion` を呼び出し
3. APIからの献立提案を `stores/mealStore` に保存
4. Result ページ（またはモーダル）で store の内容を表示
5. ユーザは「お気に入り保存」→ `localStorage` に保存（将来的にはAPI連携）

## API インターフェース（例）
バックエンドの仕様に基づき、以下のエンドポイントを定義します。

| メソッド | エンドポイント | 説明 |
| :--- | :--- | :--- |
| `GET` | `/ingredients` | 冷蔵庫に入っている食材の一覧を取得する。 |
| `POST` | `/ingredients` | 新しい食材を冷蔵庫に追加する。 |
| `PUT` | `/ingredients/:id` | 特定の食材の情報（数量など）を更新する。 |
| `DELETE` | `/ingredients/:id` | 特定の食材を削除する。 |
| `POST` | `/recipes/suggestion` | 現在の食材リストを元に、夕食の献立をGPTに提案してもらう。 |

### 主なリクエスト/レスポンス形式

- **食材登録 (`POST /ingredients`)**
  - **リクエスト:** `{"name": "にんじん", "quantity": "2本", "expiration_date": "2023-12-31"}`
  - **レスポンス:** `{"id": 1, "name": "にんじん", "quantity": "2本", "expiration_date": "2023-12-31"}`
- **献立提案 (`POST /recipes/suggestion`)**
  - **レスポンス:** `{"suggestions": [{"name": "料理名", "steps": ["手順1"], "missing_items": []}]}`

## 状態管理とキャッシュ
- 一時的 UI 状態: local component state
- 共有状態: Zustand store
- API キャッシュ: store 内で TTL 管理 or SWR/React Query（要検討）
- 永続化: localStorage（オフライン用）、同期は背景で行う

## アクセシビリティ
- 主要 UI はキーボード操作可能、ARIA ランドマーク追加
- カラーパレットはコントラスト基準 WCAG AA 準拠
- 画像は alt 属性必須

## テスト戦略
- ユニット: コンポーネント単位（Vitest + RTL）
- 統合: 主要フロー（条件入力 → 結果表示）
- E2E（必要時）: Playwright / Cypress（将来的に導入）

## CI/CD
- PR ごとに Biome(lint/format)・TypeCheck・Unit Tests を実行
- main ブランチにマージ後に自動デプロイ
- 署名済みリリース／バージョン管理は GitHub Releases を想定

## 開発ルール（短）
- TypeScript strict モード有効
- コンポーネントは小さく責務を一つに
- 命名: kebab-case（ファイル）、PascalCase（React コンポーネント）
- CSS はユーティリティ優先 + 必要な場合 CSS Module

## 測定指標（初期）
- ビルドサイズ
- 初回表示時間（TTFB・First Contentful Paint）
- 主要操作成功時間（決定までの秒数）
- テストカバレッジ（目標 80%）

## ロードマップ（短期）
1. プロトタイプ: Home / Result / API モック（1 sprint）
2. 状態管理と簡易保存（2 sprint）
3. テストカバレッジ拡充、アクセシビリティ改善（3 sprint）
4. デプロイ・モニタリング（4 sprint）

## 未解決事項（要相談）
- バックエンド API の最終仕様
- 認証の有無（ログインでお気に入り同期するか）
- オフライン機能の範囲

<!-- ...existing code... -->